From a31fd5f2d45c0d2bfe3a04893cd0ee3cff0c04cb Mon Sep 17 00:00:00 2001
From: "Li, Guangli" <guangli.li@intel.com>
Date: Mon, 26 Aug 2019 17:51:44 +0800
Subject: [PATCH] unversioned-system-path

Signed-off-by: Li, Guangli <guangli.li@intel.com>
Signed-off-by: Sean V Kelley <sean.v.kelley@linux.intel.com>
---
 intern/ghost/intern/GHOST_SystemPathsUnix.cpp | 2 ++
 source/creator/CMakeLists.txt                 | 2 +-
 2 files changed, 3 insertions(+), 1 deletion(-)

diff --git a/intern/ghost/intern/GHOST_SystemPathsUnix.cpp b/intern/ghost/intern/GHOST_SystemPathsUnix.cpp
index 9514edb..2e4a95d 100644
--- a/intern/ghost/intern/GHOST_SystemPathsUnix.cpp
+++ b/intern/ghost/intern/GHOST_SystemPathsUnix.cpp
@@ -54,6 +54,8 @@ GHOST_SystemPathsUnix::~GHOST_SystemPathsUnix()
 
 const GHOST_TUns8 *GHOST_SystemPathsUnix::getSystemDir(int, const char *versionstr) const
 {
+  /* ignore versionstr when building the system path */
+  versionstr = "";
   /* no prefix assumes a portable build which only uses bundled scripts */
   if (static_path) {
     static string system_path = string(static_path) + "/blender/" + versionstr;
diff --git a/source/creator/CMakeLists.txt b/source/creator/CMakeLists.txt
index f4938b7..1da5da1 100644
--- a/source/creator/CMakeLists.txt
+++ b/source/creator/CMakeLists.txt
@@ -329,7 +329,7 @@ if(UNIX AND NOT APPLE)
     if(WITH_INSTALL_PORTABLE)
       set(TARGETDIR_VER ${BLENDER_VERSION})
     else()
-      set(TARGETDIR_VER share/blender/${BLENDER_VERSION})
+      set(TARGETDIR_VER share/blender)
     endif()
   endif()
 
-- 
2.22.0

