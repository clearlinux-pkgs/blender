From 9d7a2b2f3f7fd88b74452ef75c3ab33666ecece8 Mon Sep 17 00:00:00 2001
From: "Li, Guangli" <guangli.li@intel.com>
Date: Mon, 26 Aug 2019 17:59:54 +0800
Subject: [PATCH] [PATCH 5/5] work around to use class name as id name

Signed-off-by: Li, Guangli <guangli.li@intel.com>
Signed-off-by: Sean V Kelley <sean.v.kelley@linux.intel.com>
---
 source/blender/python/intern/bpy_rna.c | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

diff --git a/source/blender/python/intern/bpy_rna.c b/source/blender/python/intern/bpy_rna.c
index 734e929..5ad972e 100644
--- a/source/blender/python/intern/bpy_rna.c
+++ b/source/blender/python/intern/bpy_rna.c
@@ -8076,8 +8076,9 @@ static int bpy_class_validate_recursive(PointerRNA *dummyptr,
                      identifier);
         return -1;
       }
-
-      PyErr_Clear();
+      else {
+        PyErr_Clear();
+      }
     }
     else {
       if (pyrna_py_to_prop(dummyptr, prop, NULL, item, "validating class:") != 0) {
-- 
2.22.0

