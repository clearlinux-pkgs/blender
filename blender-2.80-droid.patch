From 2f3ad6dbad9c895b15f6eeb6b2033f885f0a009f Mon Sep 17 00:00:00 2001
From: "Li, Guangli" <guangli.li@intel.com>
Date: Fri, 23 Aug 2019 22:32:34 +0800
Subject: [PATCH] Subject: [PATCH] internal font patch

Signed-off-by: Li, Guangli <guangli.li@intel.com>
Signed-off-by: Sean V Kelley <sean.v.kelley@linux.intel.com>
---
 source/blender/blenfont/intern/blf_font_i18n.c | 2 +-
 source/creator/CMakeLists.txt                  | 6 +++---
 2 files changed, 4 insertions(+), 4 deletions(-)

diff --git a/source/blender/blenfont/intern/blf_font_i18n.c b/source/blender/blenfont/intern/blf_font_i18n.c
index 74113ae..827323c 100644
--- a/source/blender/blenfont/intern/blf_font_i18n.c
+++ b/source/blender/blenfont/intern/blf_font_i18n.c
@@ -50,7 +50,7 @@ static struct FontBuf unifont_mono_ttf = {"bmonofont-i18n.ttf.gz"};
 
 static void fontbuf_load(struct FontBuf *fb)
 {
-  const char *fontpath = BKE_appdir_folder_id(BLENDER_DATAFILES, "fonts");
+  const char * const fontpath = "/usr/share/fonts/blender";
   if (fontpath) {
     char unifont_path[1024];
     BLI_snprintf(unifont_path, sizeof(unifont_path), "%s/%s", fontpath, fb->filename);
diff --git a/source/creator/CMakeLists.txt b/source/creator/CMakeLists.txt
index 77877ff..2e71d4a 100644
--- a/source/creator/CMakeLists.txt
+++ b/source/creator/CMakeLists.txt
@@ -393,9 +393,9 @@ endif()
 # localization
 if(WITH_INTERNATIONAL)
   install(
-    DIRECTORY
-      ${CMAKE_SOURCE_DIR}/release/datafiles/fonts
-    DESTINATION ${TARGETDIR_VER}/datafiles
+          DIRECTORY ${CMAKE_SOURCE_DIR}/release/datafiles/fonts/
+          DESTINATION ${CMAKE_INSTALL_PREFIX}/share/fonts/blender
+
   )
 
   set(_locale_dir "${CMAKE_SOURCE_DIR}/release/datafiles/locale")
-- 
2.22.0

